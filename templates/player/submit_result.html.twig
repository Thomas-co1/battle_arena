{% extends 'base.html.twig' %}

{% block title %}Saisir Résultat - Battle Arena{% endblock %}
{% block content %}
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">Saisir le résultat du match</h4>
                </div>
                <div class="card-body">
                    <div class="row mb-4">
                        <div class="col-md-5 text-center">
                            <div class="card bg-light">
                                <div class="card-body">
                                    <h5>{{ app.user.player.gamertag }}</h5>
                                    <p class="mb-0">{{ app.user.player.mainCharacter }}</p>
                                    <small class="text-muted">Niveau {{ app.user.player.skillLevel }}</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 d-flex align-items-center justify-content-center">
                            <h4>VS</h4>
                        </div>
                        <div class="col-md-5 text-center">
                            <div class="card bg-light">
                                <div class="card-body">
                                    <h5>{{ opponent.gamertag }}</h5>
                                    <p class="mb-0">{{ opponent.mainCharacter }}</p>
                                    <small class="text-muted">Niveau {{ opponent.skillLevel }}</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <div class="row mb-3">
                        <div class="col-md-12">
                            <p class="text-muted">
                                <strong>Tournoi:</strong> {{ match.tournament.name }}<br>
                                <strong>Créé:</strong> {{ match.createdDate|date('d/m/Y H:i') }}
                                {% if match.scheduledDate %}
                                    <br><strong>Programmé pour:</strong> {{ match.scheduledDate|date('d/m/Y H:i') }}
                                {% endif %}
                            </p>
                        </div>
                    </div>

                    <hr>

                    <div class="row">
                        <div class="col-md-12">
                            <h5>Comment s'est déroulé le match pour toi?</h5>
                            
                            {{ form_start(form) }}
                                <div class="mb-4">
                                    {{ form_widget(form.result) }}
                                </div>

                                <div class="alert alert-info" role="alert">
                                    <strong>Important!</strong> Les deux joueurs doivent soumettre le même résultat.
                                    Si vous ne vous mettez pas d'accord, le match sera soumis à la modération par l'administrateur.
                                </div>

                                {{ form_widget(form.submit, {'attr': {'class': 'btn btn-success btn-lg w-100'}}) }}
                            {{ form_end(form) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
